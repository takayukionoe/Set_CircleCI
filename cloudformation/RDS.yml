AWSTemplateFormatVersion: "2010-09-09"
Description: RDS sample
#stacknameï¼šstack01-5

Parameters:
    DBMasterUserName:
        Default: admin
        Type: String
    DBMasterUserPassword:
        Default: Otlock4869
        Type: String
        NoEcho: 'true'
    EngineVersion:
        Default: 8.0.28
        Type: String
    StorageType:
        Default: gp2
        Type: String
    InstanceClass:
        Default: db.t3.micro
        Type: String
    StorageSize:
        Default: 20
        Type: String
        
Resources:
    Onoedatabase02:
        Type: AWS::RDS::DBInstance
        Properties:
            AllocatedStorage: !Ref 'StorageSize'
            DBInstanceClass: !Ref 'InstanceClass'
            DBInstanceIdentifier: Onoedatabase02
            DBName: Onoedatabase02
            DBSubnetGroupName: !Ref 'DBSubnetGroup'
            Engine: mysql
            EngineVersion: !Ref 'EngineVersion'
            StorageType: !Ref 'StorageType'
            MasterUserPassword: !Ref 'DBMasterUserPassword'
            MasterUsername: !Ref 'DBMasterUserName'
            PubliclyAccessible: 'false'
            StorageEncrypted: 'false'
            CopyTagsToSnapshot: 'false'
            DeleteAutomatedBackups: 'true'
            MultiAZ: 'false'
            BackupRetentionPeriod: 0
            VPCSecurityGroups:
            - !ImportValue Security-01-Security03
      
    DBSubnetGroup:
        Properties:
            DBSubnetGroupDescription: raisetech13th-rds
            DBSubnetGroupName: raisetech13th-rds
            SubnetIds:
            - !ImportValue VPC-subnet-01-PrivateSubnet1A
            - !ImportValue VPC-subnet-01-PrivateSubnet1C
        Type: AWS::RDS::DBSubnetGroup
